var FFmpeg = require('./plain-ffmpeg');

var spawn = require('child_process').spawn;



//        var proc1 = spawn('/Users/blaze/node_modules/ffmpeg-static/bin/darwin/x64/ffmpeg', ['-i "concat:../../audio/8559b0222c608c750b41b7a0d0de9f4e_04.wav|../../audio/8559b0222c608c750b41b7a0d0de9f4e_00.wav|../../audio/8559b0222c608c750b41b7a0d0de9f4e_02.wav|../../audio/8559b0222c608c750b41b7a0d0de9f4e_01.wav|../../audio/8559b0222c608c750b41b7a0d0de9f4e_03.wav" -c copy out.wav']);



options = {
	global: {
		'-y': null,
	},
	input: {
		'-i': '"concat:../../audio/8559b0222c608c750b41b7a0d0de9f4e_04.wav|../../audio/8559b0222c608c750b41b7a0d0de9f4e_00.wav|../../audio/8559b0222c608c750b41b7a0d0de9f4e_02.wav|../../audio/8559b0222c608c750b41b7a0d0de9f4e_01.wav|../../audio/8559b0222c608c750b41b7a0d0de9f4e_03.wav"'
	},
	output: {
		'-c':'copy',
		'test.wav': null
	}
}

ffmpeg = new FFmpeg(options);
ffmpeg.start()



options = {
	global: {
		'-y': null,
	},
	input: {
		'-i': '../../audio/8559b0222c608c750b41b7a0d0de9f4e_03.wav'

	},
	output: {
		'-c copy': 'out.wav',
		'-b:a': '160k',
		'-filter:a': 'atempo=1.25',
		'test.m4a': null
	}
}



//file '../../audio/8559b0222c608c750b41b7a0d0de9f4e_04.wav' file '../../audio/8559b0222c608c750b41b7a0d0de9f4e_00.wav' file '../../audio/8559b0222c608c750b41b7a0d0de9f4e_02.wav' file '../../audio/8559b0222c608c750b41b7a0d0de9f4e_01.wav' file '../../audio/8559b0222c608c750b41b7a0d0de9f4e_03.wav'


// console.log(ffmpeg.options);

// // Test progress parser
// ffmpeg = new FFmpeg();

// progress_string = "frame=  182 fps= 62 q=32766.0 Lsize=     301kB time=00:00:06.00 bitrate= 411.5kbits/s";
// progress_obj = {frame: '182', fps: '62', targetSize: '301', timeMark: '00:00:06.00', kbps: '411.5'};

// console.log("Parsed progress:");
// console.log(ffmpeg._parseProgress(progress_string));

// // TODO: test the eventEmiter

// ffmpeg = new FFmpeg();
// ffmpeg.on('data', function(){})
// if ('data' in ffmpeg.proc._events)
// 	console.log("Binding events OK");
// else
// 	console.log("Binding events FAIL");